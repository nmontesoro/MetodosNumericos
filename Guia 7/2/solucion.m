%   h = 1.000
%   	i    t          Estimado   Exacto
%   	01   0.000000   0.500000   1.000000
%   	02   1.000000   0.750000   0.819592
%   	03   2.000000   1.375000   1.103638
%   	04   3.000000   2.187500   1.669390
%   
%   Error: 0.518110 (31.036 %)
%   ---------------------------------------
%   h = 0.500
%   	i    t          Estimado   Exacto
%   	01   0.000000   0.750000   1.000000
%   	02   0.500000   0.687500   0.836402
%   	03   1.000000   0.765625   0.819592
%   	04   1.500000   0.949219   0.917100
%   	05   2.000000   1.211914   1.103638
%   	06   2.500000   1.533936   1.359514
%   	07   3.000000   1.900452   1.669390
%   
%   Error: 0.231061 (13.841 %)
%   ---------------------------------------
%   h = 0.250
%   	i    t          Estimado   Exacto
%   	01   0.000000   0.875000   1.000000
%   	02   0.250000   0.796875   0.897491
%   	03   0.500000   0.759766   0.836402
%   	04   0.750000   0.758545   0.811868
%   	05   1.000000   0.788727   0.819592
%   	06   1.250000   0.846386   0.855784
%   	07   1.500000   0.928088   0.917100
%   	08   1.750000   1.030827   1.000586
%   	09   2.000000   1.151973   1.103638
%   	10   2.250000   1.289227   1.223957
%   	11   2.500000   1.440573   1.359514
%   	12   2.750000   1.604252   1.508519
%   	13   3.000000   1.778720   1.669390
%   
%   Error: 0.109330 (6.549 %)
%   ---------------------------------------

% Genere una tabla con las soluciones para cada método y cada tamaño de 
%   paso, más la solución exacta. Calcule el error absoluto y relativo
%   para cada caso cuando t = 3.

f = @(t, y) (t - y) / 2;
y = @(t) 3 .* exp(-t./2) - 2 + t;

Resolucion(f, y, 1, 3, 1);
Resolucion(f, y, 1, 3, 0.5);
Resolucion(f, y, 1, 3, 0.25);

function Y = Resolucion(f, g, y0, yf, h)
    y = y0;
    n = yf / h;
    Y = zeros(n + 1, 1);

    fprintf('h = %4.3f\n\ti    t          Estimado   Exacto\n', h);

    for i = 0:n
        t = i * h;
        y = y + h * f(t, y);
        Y(i + 1) = y;
        % fprintf('Y_{%02d} = %7.6f (t = %7.6f)\n', i + 1, y, t);
        fprintf('\t%02d   %7.6f   %7.6f   %7.6f\n', i + 1, t, y, g(t));
    end

    exacto = g(t);
    err_abs = abs(Y(n + 1) - exacto);
    err_rel = err_abs / abs(exacto);

    fprintf('\nError: %7.6f (%4.3f %%)\n', err_abs, err_rel * 100);
    fprintf('---------------------------------------\n');
end
